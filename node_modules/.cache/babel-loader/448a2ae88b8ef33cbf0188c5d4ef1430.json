{"ast":null,"code":"import { getDataJson, pollingRefresh } from '@/utils';\nexport default {\n  name: 'BButton',\n  props: {\n    cptId: {\n      type: String,\n      default: ''\n    },\n    configProps: {\n      type: Object,\n      default: () => {}\n    }\n  },\n  data() {\n    return {\n      cptData: {},\n      uuid: null\n    };\n  },\n  created() {\n    this.uuid = require('uuid').v1();\n    this.refreshCptData();\n  },\n  methods: {\n    refreshCptData() {\n      pollingRefresh(this.uuid, this.configProps.cptDataForm, this.loadData);\n    },\n    loadData() {\n      getDataJson(this.configProps.cptDataForm, this.cptId).then(res => {\n        this.cptData = res;\n      });\n    },\n    handleClickEvent() {\n      // 开启了点击事件\n      if (this.configProps.attribute.event) {\n        // 点击跳转\n        if (this.configProps.attribute.eType === 'url') {\n          this.handleClickUrl();\n        } else {\n          // 组件交互\n          this.configProps.attribute.eventList.forEach(_e => {\n            switch (_e.eMode) {\n              case 'hidden':\n                // 控制组件显隐\n                _e.cpt.forEach(cId => {\n                  this.$store.dispatch('bigScreen/changeCptHiddenStatus', {\n                    id: cId\n                  });\n                });\n                break;\n              case 'refreshCpt':\n                this.$emit('refreshCpt', _e.cpt);\n                // 刷新部分组件数据\n                break;\n              case 'refreshCanvas':\n                // 刷新所有组件数据\n                this.$emit('refreshAllCpts');\n                break;\n              default:\n                break;\n            }\n          });\n        }\n      }\n    },\n    handleClickUrl() {\n      if (this.configProps.attribute.url.startsWith('view')) {\n        // 跳转到其他大屏\n        // this.$router.push(xxx)\n        this.$emit('reload');\n      } else {\n        // 跳到其他外部链接\n        window.open(this.configProps.attribute.url);\n      }\n    }\n  }\n};","map":null,"metadata":{},"sourceType":"module"}