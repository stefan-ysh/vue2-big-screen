{"ast":null,"code":"import Editor from 'vue2-ace-editor';\n// 主题\nimport 'brace/theme/monokai';\n// 代码片段\nimport 'brace/snippets/javascript';\nimport 'brace/snippets/json';\nimport 'brace/snippets/sql';\n// import 'brace/snippets/dockerfile'\n// import 'brace/snippets/python'\n// import 'brace/snippets/php'\n// import 'brace/snippets/html'\n// import 'brace/snippets/css'\n// import 'brace/snippets/ruby'\n// 代码语言\nimport 'brace/mode/javascript';\nimport 'brace/mode/json';\nimport 'brace/mode/sql';\n// import 'brace/mode/dockerfile'\n// import 'brace/mode/python'\n// import 'brace/mode/php'\n// import 'brace/mode/html'\n// import 'brace/mode/ruby'\n// import 'brace/mode/css'\n// 语言扩展\nimport 'brace/ext/language_tools';\nimport 'brace/ext/emmet';\nimport 'brace/ext/beautify';\nimport 'brace/ext/searchbox';\nimport 'brace/ext/chromevox';\nimport 'brace/ext/error_marker';\nimport 'brace/ext/keybinding_menu';\nimport 'brace/ext/linking';\nimport 'brace/ext/modelist';\nimport 'brace/ext/old_ie';\nimport 'brace/ext/settings_menu';\nimport 'brace/ext/spellcheck';\nimport 'brace/ext/split';\nimport 'brace/ext/static_highlight';\nimport 'brace/ext/statusbar';\nimport 'brace/ext/whitespace';\nimport 'brace/ext/textarea';\nimport 'brace/ext/themelist';\nexport default {\n  components: {\n    Editor\n  },\n  // model: {\n  //   prop: 'value',\n  //   event: 'change'\n  // },\n\n  props: {\n    value: {\n      type: String,\n      default: ''\n    },\n    mode: {\n      type: String,\n      default: 'sql'\n    },\n    currentCpt: {\n      type: Object,\n      default: () => {}\n    },\n    field: {\n      type: String,\n      default: ''\n    }\n  },\n  data() {\n    return {\n      originVal: '',\n      language: 'javascript',\n      options: {\n        // 启用基本自动完成\n        enableBasicAutocompletion: true,\n        // 启用代码段\n        enableSnippets: true,\n        // 启用实时自动完成\n        enableLiveAutocompletion: true,\n        printMarginColumn: 30,\n        // 显示参考线\n        displayIndentGuides: false,\n        // 启用Emmet\n        enableEmmet: true,\n        // 标签大小\n        tabSize: 6,\n        // 设置字号\n        fontSize: 14,\n        // 使用辅助对象\n        useWorker: true,\n        // 去除编辑器里的竖线\n        showPrintMargin: false,\n        // 选中多处\n        enableMultiselect: true,\n        // 是否只读\n        readOnly: false,\n        // 显示折叠部件\n        showFoldWidgets: true,\n        // 淡入折叠部件\n        fadeFoldWidgets: true,\n        // 换行\n        wrap: true\n      }\n    };\n  },\n  watch: {\n    currentCpt: {\n      handler(newVal, oldVal) {\n        if (!oldVal) {\n          this.originVal = newVal.configProps.cptDataForm[this.field];\n        }\n      },\n      deep: true,\n      immediate: true\n    },\n    mode: {\n      handler(newVal, oldVal) {\n        this.language = newVal;\n      },\n      immediate: true\n    }\n  },\n  methods: {\n    editorInit: function (editor) {\n      console.log('%c [ editor ]-149', 'font-size:13px; background:pink; color:#bf2c9f;', editor);\n      // console.log('debug log --> ', editor)\n      // // 窗口自适应\n      // // editor.resize();\n      // // 监听编辑器变化\n      // editor.getSession().on('change', (val) => {\n      //   console.log('debug log --> ', editor.getValue())\n\n      //   this.$emit('change', editor.getValue())\n      // })\n    },\n\n    confirm() {\n      this.$emit('confirm');\n    },\n    cancel() {\n      // eslint-disable-next-line vue/no-mutating-props\n      this.currentCpt.configProps.cptDataForm[this.field] = this.originVal;\n      this.$emit('cancel');\n    }\n  }\n};","map":null,"metadata":{},"sourceType":"module"}