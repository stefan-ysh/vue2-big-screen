{"ast":null,"code":"import rightMenu from '@/components/RightMenu';\nconst install = function (Vue) {\n  let oldInstance = null;\n  const RightCxtCtr = Vue.extend(rightMenu);\n  /**\n   * @param options.menu 右键的菜单选项\n   * @param options.event 右键点击事件\n   * @param options.posX 如果不传event对象，则需要指定X坐标\n   * @param options.posY 如果不传event对象，则需要指定Y坐标\n   * @param options.canClickFather 点击父级节点是否也触发事件\n   * @param options.canHoverOut 鼠标是否可以悬浮在ctxmenu之外\n   * @param options.backgroundColor 背景色\n   * @param options.activeColor 弹窗悬浮颜色\n   * @param options.nowBoxWidth 顶级弹窗的宽度\n   */\n  const rightCxtFn = function (options) {\n    return new Promise((resolve, reject) => {\n      const instance = new RightCxtCtr();\n      instance.menu = options.menu;\n      instance.canClickFather = options.canClickFather; // 点击父级节点是否也触发事件\n      instance.canHoverOut = options.canHoverOut; // 鼠标是否可以悬浮在ctxmenu之外\n      instance.backgroundColor = options.backgroundColor || '#fff'; // 弹窗背景色\n      instance.activeColor = options.activeColor || '#f2f2f2'; // 弹窗悬浮颜色\n      // 处理X, Y坐标\n      instance.posX = options.event && options.event.clientX || options.posX || 0;\n      instance.absoluteX = instance.posX;\n      instance.posY = options.event && options.event.clientY || options.posY || 0;\n      instance.nowBoxWidth = options.nowBoxWidth || 200; // 当前节点的宽度，不写则为200\n      instance.needReverse = instance.posX + instance.nowBoxWidth > document.body.clientWidth - 5;\n      if (instance.needReverse) {\n        instance.posX = instance.posX - instance.nowBoxWidth;\n      }\n      oldInstance = instance;\n      instance.topEmitClick = data => {\n        resolve(data);\n      };\n      instance.topEmitCancel = data => {\n        reject(data);\n      };\n      rightCxtFn.destroy();\n      instance.$mount();\n      document.body.appendChild(instance.$el);\n    });\n  };\n  rightCxtFn.destroy = () => {\n    if (oldInstance) {\n      oldInstance.$destroy();\n      if (oldInstance.$el && oldInstance.$el.className) {\n        const oldClassName = `.${oldInstance.$el.className.replace(' ', '.')}`;\n        if (document.querySelectorAll(oldClassName).length) {\n          document.body.removeChild(oldInstance.$el);\n        }\n      }\n      oldInstance = null;\n    }\n  };\n  Vue.prototype.$rightCtx = rightCxtFn;\n};\nexport default {\n  install\n};","map":{"version":3,"names":["rightMenu","install","Vue","oldInstance","RightCxtCtr","extend","rightCxtFn","options","Promise","resolve","reject","instance","menu","canClickFather","canHoverOut","backgroundColor","activeColor","posX","event","clientX","absoluteX","posY","clientY","nowBoxWidth","needReverse","document","body","clientWidth","topEmitClick","data","topEmitCancel","destroy","$mount","appendChild","$el","$destroy","className","oldClassName","replace","querySelectorAll","length","removeChild","prototype","$rightCtx"],"sources":["/Users/ysh/Documents/GitHub/vue2-big-screen/src/utils/rightMenu.js"],"sourcesContent":["import rightMenu from '@/components/RightMenu'\n\nconst install = function(Vue) {\n  let oldInstance = null\n  const RightCxtCtr = Vue.extend(rightMenu)\n  /**\n   * @param options.menu 右键的菜单选项\n   * @param options.event 右键点击事件\n   * @param options.posX 如果不传event对象，则需要指定X坐标\n   * @param options.posY 如果不传event对象，则需要指定Y坐标\n   * @param options.canClickFather 点击父级节点是否也触发事件\n   * @param options.canHoverOut 鼠标是否可以悬浮在ctxmenu之外\n   * @param options.backgroundColor 背景色\n   * @param options.activeColor 弹窗悬浮颜色\n   * @param options.nowBoxWidth 顶级弹窗的宽度\n   */\n  const rightCxtFn = function(options) {\n    return new Promise((resolve, reject) => {\n      const instance = new RightCxtCtr()\n      instance.menu = options.menu\n      instance.canClickFather = options.canClickFather // 点击父级节点是否也触发事件\n      instance.canHoverOut = options.canHoverOut // 鼠标是否可以悬浮在ctxmenu之外\n      instance.backgroundColor = options.backgroundColor || '#fff' // 弹窗背景色\n      instance.activeColor = options.activeColor || '#f2f2f2' // 弹窗悬浮颜色\n      // 处理X, Y坐标\n      instance.posX = (options.event && options.event.clientX) || options.posX || 0\n      instance.absoluteX = instance.posX\n      instance.posY = (options.event && options.event.clientY) || options.posY || 0\n\n      instance.nowBoxWidth = options.nowBoxWidth || 200 // 当前节点的宽度，不写则为200\n      instance.needReverse = instance.posX + instance.nowBoxWidth > document.body.clientWidth - 5\n\n      if (instance.needReverse) {\n        instance.posX = instance.posX - instance.nowBoxWidth\n      }\n      oldInstance = instance\n      instance.topEmitClick = data => {\n        resolve(data)\n      }\n      instance.topEmitCancel = data => {\n        reject(data)\n      }\n      rightCxtFn.destroy()\n      instance.$mount()\n      document.body.appendChild(instance.$el)\n    })\n  }\n  rightCxtFn.destroy = () => {\n    if (oldInstance) {\n      oldInstance.$destroy()\n      if (oldInstance.$el && oldInstance.$el.className) {\n        const oldClassName = `.${oldInstance.$el.className.replace(' ', '.')}`\n        if (document.querySelectorAll(oldClassName).length) {\n          document.body.removeChild(oldInstance.$el)\n        }\n      }\n      oldInstance = null\n    }\n  }\n  Vue.prototype.$rightCtx = rightCxtFn\n}\n\nexport default {\n  install\n}\n"],"mappings":"AAAA,OAAOA,SAAS,MAAM,wBAAwB;AAE9C,MAAMC,OAAO,GAAG,UAASC,GAAG,EAAE;EAC5B,IAAIC,WAAW,GAAG,IAAI;EACtB,MAAMC,WAAW,GAAGF,GAAG,CAACG,MAAM,CAACL,SAAS,CAAC;EACzC;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACE,MAAMM,UAAU,GAAG,UAASC,OAAO,EAAE;IACnC,OAAO,IAAIC,OAAO,CAAC,CAACC,OAAO,EAAEC,MAAM,KAAK;MACtC,MAAMC,QAAQ,GAAG,IAAIP,WAAW,EAAE;MAClCO,QAAQ,CAACC,IAAI,GAAGL,OAAO,CAACK,IAAI;MAC5BD,QAAQ,CAACE,cAAc,GAAGN,OAAO,CAACM,cAAc,EAAC;MACjDF,QAAQ,CAACG,WAAW,GAAGP,OAAO,CAACO,WAAW,EAAC;MAC3CH,QAAQ,CAACI,eAAe,GAAGR,OAAO,CAACQ,eAAe,IAAI,MAAM,EAAC;MAC7DJ,QAAQ,CAACK,WAAW,GAAGT,OAAO,CAACS,WAAW,IAAI,SAAS,EAAC;MACxD;MACAL,QAAQ,CAACM,IAAI,GAAIV,OAAO,CAACW,KAAK,IAAIX,OAAO,CAACW,KAAK,CAACC,OAAO,IAAKZ,OAAO,CAACU,IAAI,IAAI,CAAC;MAC7EN,QAAQ,CAACS,SAAS,GAAGT,QAAQ,CAACM,IAAI;MAClCN,QAAQ,CAACU,IAAI,GAAId,OAAO,CAACW,KAAK,IAAIX,OAAO,CAACW,KAAK,CAACI,OAAO,IAAKf,OAAO,CAACc,IAAI,IAAI,CAAC;MAE7EV,QAAQ,CAACY,WAAW,GAAGhB,OAAO,CAACgB,WAAW,IAAI,GAAG,EAAC;MAClDZ,QAAQ,CAACa,WAAW,GAAGb,QAAQ,CAACM,IAAI,GAAGN,QAAQ,CAACY,WAAW,GAAGE,QAAQ,CAACC,IAAI,CAACC,WAAW,GAAG,CAAC;MAE3F,IAAIhB,QAAQ,CAACa,WAAW,EAAE;QACxBb,QAAQ,CAACM,IAAI,GAAGN,QAAQ,CAACM,IAAI,GAAGN,QAAQ,CAACY,WAAW;MACtD;MACApB,WAAW,GAAGQ,QAAQ;MACtBA,QAAQ,CAACiB,YAAY,GAAGC,IAAI,IAAI;QAC9BpB,OAAO,CAACoB,IAAI,CAAC;MACf,CAAC;MACDlB,QAAQ,CAACmB,aAAa,GAAGD,IAAI,IAAI;QAC/BnB,MAAM,CAACmB,IAAI,CAAC;MACd,CAAC;MACDvB,UAAU,CAACyB,OAAO,EAAE;MACpBpB,QAAQ,CAACqB,MAAM,EAAE;MACjBP,QAAQ,CAACC,IAAI,CAACO,WAAW,CAACtB,QAAQ,CAACuB,GAAG,CAAC;IACzC,CAAC,CAAC;EACJ,CAAC;EACD5B,UAAU,CAACyB,OAAO,GAAG,MAAM;IACzB,IAAI5B,WAAW,EAAE;MACfA,WAAW,CAACgC,QAAQ,EAAE;MACtB,IAAIhC,WAAW,CAAC+B,GAAG,IAAI/B,WAAW,CAAC+B,GAAG,CAACE,SAAS,EAAE;QAChD,MAAMC,YAAY,GAAI,IAAGlC,WAAW,CAAC+B,GAAG,CAACE,SAAS,CAACE,OAAO,CAAC,GAAG,EAAE,GAAG,CAAE,EAAC;QACtE,IAAIb,QAAQ,CAACc,gBAAgB,CAACF,YAAY,CAAC,CAACG,MAAM,EAAE;UAClDf,QAAQ,CAACC,IAAI,CAACe,WAAW,CAACtC,WAAW,CAAC+B,GAAG,CAAC;QAC5C;MACF;MACA/B,WAAW,GAAG,IAAI;IACpB;EACF,CAAC;EACDD,GAAG,CAACwC,SAAS,CAACC,SAAS,GAAGrC,UAAU;AACtC,CAAC;AAED,eAAe;EACbL;AACF,CAAC"},"metadata":{},"sourceType":"module"}